{"version":3,"file":"guiding.min.js","sources":["../src/guiding.js"],"sourcesContent":["define(['jquery', 'core/log'], function(jQuery, log) {\n\n  \"use strict\";\n\n  log.debug('Celene 4 Boost mode.js function called');\n\n  // Make the DIV element draggable:\n  if (document.getElementById('readingLine')) {\n    dragElement(document.getElementById(\"readingLine\"));\n  }\n\n  let guidingLine;\n\n  document.addEventListener('keydown', (event) => {\n    if (event.key === 'Escape') {\n\n      if (document.getElementById('readingLine') && document.getElementById('readingLine').classList.contains('d-none')) {\n        document.getElementById('readingLine').classList.remove('d-none');\n      }\n      // If esc key was not pressed in combination with ctrl or alt or shift;\n      const isNotCombinedKey = !(event.ctrlKey || event.altKey || event.shiftKey);\n      if (isNotCombinedKey\n        && document.getElementById(\"readingLine\")\n        && !document.getElementById(\"reading-line\").classList.contains('d-none')\n      ) {\n        guidingLine = document.getElementById(\"reading-line\");\n        document.getElementById(\"reading-line\").remove();\n      } else if (isNotCombinedKey\n        && document.getElementById(\"readingLine\")\n        && document.getElementById(\"reading-line\").classList.contains('d-none')\n      ) {\n        if (document.getElementById('reading-line') && document.getElementById('reading-line').classList.contains('d-none')) {\n          document.getElementById('reading-line').classList.remove('d-none');\n        }\n      } else {\n        if (guidingLine !== null && guidingLine !== undefined) {\n          document.body.append(guidingLine);\n        }\n      }\n\n      /**\n       *\n       * @param {*} div name of the div\n       */\n      const makeResizableDiv = (div) => {\n        const element = document.querySelector(div);\n        const resizers = document.querySelectorAll(div + ' .resizer');\n        const minimum_size = 20;\n        let original_height = 0;\n        let original_y = 0;\n        let original_mouse_y = 0;\n\n        /**\n         *\n         * @param {*} val\n         */\n        const newVal = (val) => {\n          original_height = parseFloat(getComputedStyle(element, null).getPropertyValue('height').replace('px', ''));\n          original_y = element.getBoundingClientRect().top;\n          original_mouse_y = val.pageY;\n        };\n\n          /**\n           *\n           * @param {*} e\n           * @param {*} currentResizer\n           */\n           const resize = (e, currentResizer) => {\n            newVal(e);\n            if (currentResizer.classList.contains('bottom-right')) {\n              const height = original_height + (e.pageY - original_mouse_y);\n              if (height > minimum_size) {\n                element.style.height = height + 'px';\n              }\n            }\n            else if (currentResizer.classList.contains('bottom-left')) {\n              const height = original_height + (e.pageY - original_mouse_y);\n              if (height > minimum_size) {\n                element.style.height = height + 'px';\n              }\n            }\n            else if (currentResizer.classList.contains('top-right')) {\n              const height = original_height - (e.pageY - original_mouse_y);\n              if (height > minimum_size) {\n                element.style.height = height + 'px';\n                element.style.top = original_y + (e.pageY - original_mouse_y) + 'px';\n              }\n            }\n            else {\n              const height = original_height - (e.pageY - original_mouse_y);\n              if (height > minimum_size) {\n                element.style.height = height + 'px';\n                element.style.top = original_y + (e.pageY - original_mouse_y) + 'px';\n              }\n            }\n          };\n\n          /**\n           *\n           */\n          const stopResize = () => {\n            window.removeEventListener('mousemove', resize);\n          };\n\n        for (let i = 0; i < resizers.length; i++) {\n          const currentResizer = resizers[i];\n\n          currentResizer.addEventListener('mousedown', (e) => {\n            e.preventDefault();\n            newVal(e);\n            window.addEventListener('mousemove', resize(e, currentResizer));\n            window.addEventListener('mouseup', stopResize);\n          });\n        }\n      };\n      makeResizableDiv('#readingLine');\n    }\n  });\n\n  /**\n   *\n   * @param {*} elmnt\n   */\n  function dragElement(elmnt) {\n    var pos2 = 0, pos4 = 0; // Pos1 = 0, pos3 = 0,\n    if (document.getElementById(elmnt.id + \"header\")) {\n      // If present, the header is where you move the DIV from:\n      document.getElementById(elmnt.id + \"header\").onmousedown = dragMouseDown;\n    } else {\n      // Otherwise, move the DIV from anywhere inside the DIV:\n      elmnt.onmousedown = dragMouseDown;\n    }\n    /**\n     *\n     * @param {*} e\n     */\n    function dragMouseDown(e) {\n      e = e || window.event;\n      e.preventDefault();\n      // Get the mouse cursor position at startup:\n      pos4 = e.clientY;\n      document.onmouseup = closeDragElement;\n      // Call a function whenever the cursor moves:\n      document.onmousemove = elementDrag;\n    }\n    /**\n     *\n     * @param {*} e\n     */\n    function elementDrag(e) {\n      e = e || window.event;\n      e.preventDefault();\n      // Calculate the new cursor position:\n      pos2 = pos4 - e.clientY;\n      pos4 = e.clientY;\n      // Set the element's new position:\n      elmnt.style.top = (elmnt.offsetTop - pos2) + \"px\";\n    }\n    /**\n     *\n     */\n    function closeDragElement() {\n      // Stop moving when mouse button is released:\n      document.onmouseup = null;\n      document.onmousemove = null;\n    }\n  }\n});"],"names":["define","jQuery","log","guidingLine","debug","document","getElementById","elmnt","pos2","pos4","id","onmousedown","dragMouseDown","e","window","event","preventDefault","clientY","onmouseup","closeDragElement","onmousemove","elementDrag","style","top","offsetTop","dragElement","addEventListener","key","classList","contains","remove","isNotCombinedKey","ctrlKey","altKey","shiftKey","body","append","div","element","querySelector","resizers","querySelectorAll","original_height","original_y","original_mouse_y","newVal","val","parseFloat","getComputedStyle","getPropertyValue","replace","getBoundingClientRect","pageY","resize","currentResizer","height","stopResize","removeEventListener","i","length","makeResizableDiv"],"mappings":"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"}