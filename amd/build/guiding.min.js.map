{"version":3,"file":"guiding.min.js","sources":["../src/guiding.js"],"sourcesContent":["/**\n * Celene 4 boost is a clean and customizable theme.\n *\n\n */\n\ndefine(['jquery', 'core/log'], function (jQuery, log) {\n\n  \"use strict\";\n\n  log.debug('Celene 4 Boost mode.js function called');\n\n  // Make the DIV element draggable:\n  if (document.getElementById('readingLine')) {\n    dragElement(document.getElementById(\"readingLine\"));\n  }\n\n  let guidingLine;\n\n  document.addEventListener('keydown', (event) => {\n    if (event.key === 'Escape') {\n\n      if (document.getElementById('readingLine') && document.getElementById('readingLine').classList.contains('d-none')) {\n        document.getElementById('readingLine').classList.remove('d-none');\n      }\n      //if esc key was not pressed in combination with ctrl or alt or shift\n      const isNotCombinedKey = !(event.ctrlKey || event.altKey || event.shiftKey);\n      if (isNotCombinedKey\n        && document.getElementById(\"readingLine\")\n        && !document.getElementById(\"reading-line\").classList.contains('d-none')\n      ) {\n        guidingLine = document.getElementById(\"reading-line\");\n        document.getElementById(\"reading-line\").remove();\n      } else if (isNotCombinedKey\n        && document.getElementById(\"readingLine\")\n        && document.getElementById(\"reading-line\").classList.contains('d-none')\n      ) {\n        if (document.getElementById('reading-line') && document.getElementById('reading-line').classList.contains('d-none')) {\n          document.getElementById('reading-line').classList.remove('d-none');\n        }\n      } else {\n        if (guidingLine !== null && guidingLine !== undefined) {\n          document.body.append(guidingLine);\n        }\n      }\n\n      /**\n       *\n       * @param {*} div name of the div\n       */\n      const makeResizableDiv = (div) => {\n        const element = document.querySelector(div);\n        const resizers = document.querySelectorAll(div + ' .resizer');\n        const minimum_size = 20;\n        let original_height = 0;\n        let original_y = 0;\n        let original_mouse_y = 0;\n\n        /**grunt hack */\n        /**\n         *\n         * @param {*} val\n         */\n        const newVal = (val) => {\n          original_height = parseFloat(getComputedStyle(element, null).getPropertyValue('height').replace('px', ''));\n          original_y = element.getBoundingClientRect().top;\n          original_mouse_y = val.pageY;\n        };\n\n        /*jshint -W089 */\n        for (let i = 0; i < resizers.length; i++) {\n          const currentResizer = resizers[i];\n\n          currentResizer.addEventListener('mousedown', (e) => {\n            e.preventDefault();\n            newVal(e);\n            // Original_height = parseFloat(getComputedStyle(element, null).getPropertyValue('height').replace('px', ''));\n            // Original_y = element.getBoundingClientRect().top;\n            // Original_mouse_y = e.pageY;\n            window.addEventListener('mousemove', resize);\n            window.addEventListener('mouseup', stopResize);\n          });\n\n          /**\n           *\n           * @param {*} e\n           */\n          const resize = (e) => {\n            if (currentResizer.classList.contains('bottom-right')) {\n              const height = original_height + (e.pageY - original_mouse_y);\n              if (height > minimum_size) {\n                element.style.height = height + 'px';\n              }\n            }\n            else if (currentResizer.classList.contains('bottom-left')) {\n              const height = original_height + (e.pageY - original_mouse_y);\n              if (height > minimum_size) {\n                element.style.height = height + 'px';\n              }\n            }\n            else if (currentResizer.classList.contains('top-right')) {\n              const height = original_height - (e.pageY - original_mouse_y);\n              if (height > minimum_size) {\n                element.style.height = height + 'px';\n                element.style.top = original_y + (e.pageY - original_mouse_y) + 'px';\n              }\n            }\n            else {\n              const height = original_height - (e.pageY - original_mouse_y);\n              if (height > minimum_size) {\n                element.style.height = height + 'px';\n                element.style.top = original_y + (e.pageY - original_mouse_y) + 'px';\n              }\n            }\n          };\n\n          /**\n           *\n           */\n          const stopResize = () => {\n            window.removeEventListener('mousemove', resize);\n          };\n        }\n        /*jshint +W089 */\n      };\n      makeResizableDiv('#readingLine');\n    }\n  });\n\n  /**\n   *\n   * @param {*} elmnt\n   */\n  function dragElement(elmnt) {\n    var pos2 = 0, pos4 = 0; // Pos1 = 0, pos3 = 0,\n    if (document.getElementById(elmnt.id + \"header\")) {\n      // If present, the header is where you move the DIV from:\n      document.getElementById(elmnt.id + \"header\").onmousedown = dragMouseDown;\n    } else {\n      // Otherwise, move the DIV from anywhere inside the DIV:\n      elmnt.onmousedown = dragMouseDown;\n    }\n    /**\n     *\n     * @param {*} e\n     */\n    function dragMouseDown(e) {\n      e = e || window.event;\n      e.preventDefault();\n      // Get the mouse cursor position at startup:\n      //   Pos3 = e.clientX;\n      pos4 = e.clientY;\n      document.onmouseup = closeDragElement;\n      // Call a function whenever the cursor moves:\n      document.onmousemove = elementDrag;\n    }\n    /**\n     *\n     * @param {*} e\n     */\n    function elementDrag(e) {\n      e = e || window.event;\n      e.preventDefault();\n      // Calculate the new cursor position:\n      pos2 = pos4 - e.clientY;\n      pos4 = e.clientY;\n      // Set the element's new position:\n      elmnt.style.top = (elmnt.offsetTop - pos2) + \"px\";\n    }\n    /**\n     *\n     */\n    function closeDragElement() {\n      // Stop moving when mouse button is released:\n      document.onmouseup = null;\n      document.onmousemove = null;\n    }\n  }\n});"],"names":["define","jQuery","log","guidingLine","debug","document","getElementById","elmnt","pos2","pos4","id","onmousedown","dragMouseDown","e","window","event","preventDefault","clientY","onmouseup","closeDragElement","onmousemove","elementDrag","style","top","offsetTop","dragElement","addEventListener","key","classList","contains","remove","isNotCombinedKey","ctrlKey","altKey","shiftKey","body","append","div","element","querySelector","resizers","querySelectorAll","original_height","original_y","original_mouse_y","i","length","currentResizer","val","parseFloat","getComputedStyle","getPropertyValue","replace","getBoundingClientRect","pageY","resize","stopResize","height","removeEventListener","makeResizableDiv"],"mappings":"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"}