define("theme_celene4boost/tts",["exports"],(function(_exports){function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=function(language){document.body.addEventListener("contextmenu",(function(e){var bodyEl=document.body;function createMenu(event){var synth=window.speechSynthesis,mouseX=event.clientX,mouseY=event.clientY,utterThis=new SpeechSynthesisUtterance(event.target.innerText),targetInnerHtml=event.target.innerHTML,contextMenu=document.createElement("div");contextMenu.id="context-menu";var contextMenuItemFirst=document.createElement("div");contextMenuItemFirst.id="item1",contextMenuItemFirst.innerText="Lire pour moi (audio)",contextMenuItemFirst.classList.add("item"),contextMenuItemFirst.onclick=function(){e.preventDefault(),function(){var bar=document.createElement("div");bar.classList.add("options-bar"),bar.id="options-bar";var play=document.createElement("button"),spanArret=document.createElement("span");spanArret.innerText="ARRÊTER",play.append(spanArret),play.classList.add("play-btn"),play.onclick=function(e){e.preventDefault(),window.speechSynthesis.speaking&&window.speechSynthesis.cancel()};var pause=document.createElement("button"),spanPause=document.createElement("span");spanPause.innerText="PAUSE",pause.append(spanPause),pause.classList.add("play-btn"),pause.onclick=function(e){e.preventDefault(),window.speechSynthesis.speaking&&"PAUSE"===spanPause.innerText?(window.speechSynthesis.pause(),spanPause.innerText="REPRENDRE"):window.speechSynthesis.paused&&"REPRENDRE"===spanPause.innerText&&(window.speechSynthesis.resume(),spanPause.innerText="PAUSE")},bar.append(play),bar.append(pause),document.body.append(bar)}(),utterThis.lang=language&&"french"===language?"fr-FR":language&&"english"===language?"en-US":"fr-FR",utterThis.rate=getRateValueTts()?getRateValueTts():1,utterThis.pitch=getPitchValue()?getPitchValue():1,synth.speak(utterThis),utterThis.addEventListener("boundary",(function(e){if("sentence"!==e.name){var wordStart=e.charIndex,wordLength=e.charLength;if(void 0===wordLength)wordLength=event.target.innerText.substring(wordStart).match(/^[a-z\d']*/i)[0].length;var wordEnd=wordStart+wordLength,word=event.target.innerText.substring(wordStart,wordEnd),markedText=event.target.innerText.substring(0,wordStart);markedText+="<mark>"+word+"</mark>",markedText+=event.target.innerText.substring(wordEnd),event.target.innerHTML=markedText}})),event.target.classList.add("highlight"),contextMenu.remove(),utterThis.addEventListener("end",(function(){document.querySelectorAll("mark").forEach((function(div){var span=document.createElement("span");span.innerText=div.innerText,div.replaceWith(span)})),event.target.classList.remove("highlight"),event.target.innerHTML=targetInnerHtml,document.getElementById("options-bar")&&document.getElementById("options-bar").remove()}))};var contextMenuItemSecond=document.createElement("div");contextMenuItemSecond.id="item2",contextMenuItemSecond.innerText="copier",contextMenuItemSecond.classList.add("item"),contextMenuItemSecond.onclick=function(e){e.preventDefault(),navigator.clipboard.writeText(event.target.innerText).then((function(){new Toast("Texte copié : \n"+event.target.innerText,"#00b894",2500),contextMenu.remove()}))};var contextMenuItemFifth=document.createElement("div");contextMenuItemFifth.classList.add("item"),contextMenuItemFifth.innerText="Inverser les couleurs (alpha)",contextMenuItemFifth.onclick=function(){event.preventDefault();var elementToChange=event.target;elementToChange.style.filter="invert(1)"===elementToChange.style.filter?"invert(0)":"invert(1)",contextMenu.remove()};var contextMenuItemSixth=document.createElement("div");contextMenuItemSixth.classList.add("item"),contextMenuItemSixth.innerText="Recharger la page",contextMenuItemSixth.onclick=function(){event.preventDefault(),document.location.reload()};var contextMenuItemThird=null;if(void 0!==window.getSelection&&""!==window.getSelection){var text=function(){var text="";void 0!==window.getSelection?text=window.getSelection().toString():void 0!==document.selection&&"Text"==document.selection.type&&(text=document.selection.createRange().text);return text}();text&&""!==text&&((contextMenuItemThird=document.createElement("div")).innerText="copier la selection",contextMenuItemThird.classList.add("item"),contextMenuItemThird.onclick=function(e){e.preventDefault(),new Toast("Sélection copiée : \n"+text,"#00b894",2500),navigator.clipboard.writeText(text).then((function(){contextMenu.remove()}))})}var contextMenuItemFourth=document.createElement("div");contextMenuItemFourth.innerText="Tout sélectionner",contextMenuItemFourth.classList.add("item"),contextMenuItemFourth.onclick=function(e){e.preventDefault();var range,selection,doc=document.body;selection=window.getSelection(),(range=document.createRange()).selectNodeContents(doc),selection.removeAllRanges(),selection.addRange(range),contextMenu.remove()};var contextTitle=document.createElement("p");contextTitle.innerText="Options",contextTitle.classList.add("contextTitle","text-center"),contextMenu.append(contextTitle),contextMenu.append(contextMenuItemFirst),contextMenu.append(contextMenuItemSecond),"undefined"!==!_typeof(window.getSelection)&&contextMenuItemThird&&contextMenu.append(contextMenuItemThird),contextMenu.append(contextMenuItemFourth),contextMenu.append(contextMenuItemSixth),document.body.append(contextMenu);var posX=window.innerWidth-mouseX>=250?mouseX:mouseX-200,posY=window.innerHeight-mouseY>=200?mouseY:mouseY-200;contextMenu.style.top="".concat(posY,"px"),contextMenu.style.left="".concat(posX,"px")}document.getElementById("context-menu")&&(e.target.classList.contains("item")||document.getElementById("context-menu").remove()),bodyEl.classList.contains("tts")&&isClassForbiddenTts(e)&&(e.preventDefault(),e.target.innerText?function(e){e.target.innerText.split(" ");document.getElementById("context-menu")?(document.getElementById("context-menu").remove(),createMenu(e)):createMenu(e)}(e):e.target.innerText&&""!==e.target.innerText||document.getElementById("context-menu")&&document.getElementById("context-menu").remove())}));var isClassForbiddenTts=function(element){for(var doNotInclude,divToNotInclude=["generalbox","secondary-navigation","navbar","nav","drawers","completion-info","card"],i=0;i<divToNotInclude.length;i++){if(element.target.classList.contains(divToNotInclude[i])||element.target.getAttribute("role")&&"main"===element.target.getAttribute("role"))return!1;doNotInclude=!0}return doNotInclude},getRateValueTts=function(){for(var settedValues=[{class:"rate5",value:.5},{class:"rate10",value:1},{class:"rate15",value:1.5},{class:"rate20",value:2}],i=0;i<settedValues.length;i++)if(document.body.classList.contains(settedValues[i].class))return settedValues[i].value},getPitchValue=function(){for(var settedValues=[{class:"pitch5",value:.5},{class:"pitch10",value:1},{class:"pitch15",value:1.5},{class:"pitch20",value:2}],i=0;i<settedValues.length;i++)if(document.body.classList.contains(settedValues[i].class))return settedValues[i].value};document.body.addEventListener("click",(function(e){document.getElementById("context-menu")&&(e.target.classList.contains("item")||document.getElementById("context-menu").remove())}));var Constructor,protoProps,staticProps,Toast=(Constructor=function Toast(textToDisplay,color,time){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Toast),this.message=textToDisplay,this.color=color,this.time=time,this.element=null;var element=document.createElement("div");element.className="toast-notification",this.element=element;var countElements=document.getElementsByClassName("toast-notification");element.style.opacity=.8,element.style.marginBottom=55*countElements.length+"px",element.style.backgroundColor=this.color;var message=document.createElement("div");message.className="message-container",message.textContent=this.message,element.appendChild(message);var close=document.createElement("div");close.className="close-notification";var icon=document.createElement("i");icon.className="lni lni-close",close.appendChild(icon),element.append(close),document.body.appendChild(element),setTimeout((function(){element.remove()}),this.time),close.addEventListener("click",(function(){element.remove()}))},protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor)}}));

//# sourceMappingURL=tts.min.js.map